package net.aincraft.api.service;

import java.time.Duration;
import java.time.temporal.TemporalAmount;
import java.util.function.Supplier;
import net.aincraft.api.Bridge;
import org.bukkit.block.Block;
import org.jetbrains.annotations.NotNull;

public interface BlockExploitService {

  static BlockExploitService blockExploitService() {
    return Bridge.bridge().blockExploitService();
  }

  void setProviderSupplier(Supplier<? extends BlockProtectionProvider> providerSupplier);

  void setProtectionProvider(ProtectionType type, BlockProtectionProvider provider);

  void addProtection(ProtectionType type, Block block) throws IllegalArgumentException;

  boolean isProtected(ProtectionType type, Block block);

  boolean canProtect(Block block);

  Duration getTotalProtectionDuration(Block block) throws IllegalArgumentException;

  @NotNull
  TemporalAmount getRemainingProtectionTime(ProtectionType type, @NotNull Block block)
      throws IllegalArgumentException;

  enum ProtectionType {
    PLACED,
    WAX
  }
}
